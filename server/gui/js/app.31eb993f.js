(function(e){function t(t){for(var a,n,i=t[0],c=t[1],l=t[2],d=0,h=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&h.push(s[n][0]),s[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},s={app:0},o=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/crux/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"016d":function(e,t,r){"use strict";r("35c1")},"35c1":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{app:"",color:"primary",dark:"","clipped-right":""}},[r("v-toolbar-title",{staticClass:"display-1"},[e._v("Open Client Registry")]),r("v-spacer"),r("v-toolbar-items",[e.$store.state.denyAccess?e._e():r("v-btn",{attrs:{color:"primary",to:"/"}},[r("v-icon",[e._v("mdi-home")]),e._v(" "+e._s(e.$t("menu_home"))+" ")],1),e.$store.state.denyAccess?e._e():r("v-btn",{attrs:{color:"primary",to:"/review"}},[r("v-badge",{attrs:{color:"error",content:e.$store.state.totalMatchIssues,value:e.displayActionRequiredBadge,"offset-x":"100"}},[r("v-icon",[e._v("mdi-alert")]),e._v(e._s(e.$t("menu_action_required"))+" ")],1)],1),e.$store.state.denyAccess?e._e():r("v-btn",{attrs:{color:"primary",to:"/automatch"}},[r("v-badge",{attrs:{color:"error",content:e.$store.state.totalAutoMatches,value:e.displayAutoMatchBadge,"offset-x":"100"}},[r("v-icon",[e._v("mdi-alert")]),e._v(" "+e._s(e.$t("menu_auto_matches"))+" ")],1)],1),e.$store.state.denyAccess?e._e():r("v-btn",{attrs:{color:"primary",to:"/csvreport"}},[r("v-icon",[e._v("mdi-file-chart")]),e._v(e._s(e.$t("menu_csv"))+" ")],1),e.$store.state.denyAccess||"deduplication"===e.$store.state.auth.role?e._e():r("v-menu",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[r("v-btn",e._g(e._b({attrs:{color:"primary",dark:""}},"v-btn",s,!1),a),[r("v-icon",[e._v("mdi-account-outline")]),e._v(" "+e._s(e.$t("menu_accounts"))+" ")],1)]}}],null,!1,4264604511)},[r("v-list",[e.$store.state.denyAccess?e._e():r("v-list-item",{attrs:{to:"/addUser"}},[r("v-icon",[e._v("mdi-account-plus")]),e._v(" "+e._s(e.$t("account_add"))+" ")],1),e.$store.state.denyAccess?e._e():r("v-list-item",{attrs:{to:"/usersList"}},[r("v-icon",[e._v("mdi-account-plus")]),e._v(" "+e._s(e.$t("account_list"))+" ")],1),e.$store.state.denyAccess?e._e():r("v-list-item",{attrs:{to:"/changePassword"}},[r("v-icon",[e._v("mdi-account-plus")]),e._v(" "+e._s(e.$t("account_change_password"))+" ")],1)],1)],1),e.$store.state.denyAccess?e._e():r("v-btn",{attrs:{color:"primary",to:"/logout"}},[r("v-icon",[e._v("mdi-logout")]),e._v(" "+e._s(e.$t("menu_logout"))+" ")],1),e.$store.state.denyAccess?e._e():r("div",{staticClass:"icon-div"},e._l(e.languages,(function(t){return r("button",{key:t.title,on:{click:function(r){e.$i18n.locale=t.language}}},[r("flag",{attrs:{iso:t.flag,squared:!1}}),e._v(" "+e._s(t.title)+" ")],1)})),0)],1),r("v-spacer")],1),r("v-main",[r("center",[r("v-alert",{style:{width:e.$store.state.alert.width},attrs:{type:e.$store.state.alert.type,dismissible:e.$store.state.alert.dismisible,transition:e.$store.state.alert.transition},model:{value:e.$store.state.alert.show,callback:function(t){e.$set(e.$store.state.alert,"show",t)},expression:"$store.state.alert.show"}},[e._v(" "+e._s(e.$store.state.alert.msg)+" ")])],1),r("v-dialog",{attrs:{persistent:"",width:e.$store.state.progress.width},model:{value:e.$store.state.progress.enable,callback:function(t){e.$set(e.$store.state.progress,"enable",t)},expression:"$store.state.progress.enable"}},[r("v-card",{attrs:{color:"primary darken-1",dark:""}},[r("v-card-text",[e._v(" "+e._s(e.$store.state.progress.title)+" "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),r("router-view")],1)],1)},o=[],n=r("2b27"),i=r.n(n),c=r("bc3a"),l=r.n(c),u=r("9b31"),d={name:"App",mixins:[u["a"]],data:function(){return{totalMatchIssues:0,totalAutoMatches:0,languages:[{flag:"us",language:"en",title:"English"},{flag:"fr",language:"fr",title:"Francais"}]}},created:function(){var e=this;i.a.get("token")&&i.a.get("userID")&&(this.$store.state.auth.token=i.a.get("token"),this.$store.state.auth.userID=i.a.get("userID"),this.$store.state.auth.username=i.a.get("username"),l.a.get("/ocrux/isTokenActive/").then((function(){e.$store.state.denyAccess=!1,l.a.get("/ocrux/config/getURI").then((function(t){e.$store.state.systemURI=t.data})).catch((function(e){throw e})),e.getClients()}))),this.countMatchIssues(),this.countNewAutoMatches()},computed:{displayActionRequiredBadge:function(){return this.$store.state.totalMatchIssues>0},displayAutoMatchBadge:function(){return this.$store.state.totalAutoMatches>0}}},h=d,v=(r("016d"),r("2877")),p=r("6544"),m=r.n(p),f=r("0798"),_=r("7496"),g=r("40dc"),b=r("4ca6"),y=r("8336"),w=r("b0af"),$=r("99d9"),x=r("169a"),k=r("132d"),C=r("8860"),V=r("da13"),I=r("f6c4"),D=r("e449"),R=r("8e36"),S=r("2fa4"),A=r("2a7f"),N=Object(v["a"])(h,s,o,!1,null,"1e22740f",null),P=N.exports;m()(N,{VAlert:f["a"],VApp:_["a"],VAppBar:g["a"],VBadge:b["a"],VBtn:y["a"],VCard:w["a"],VCardText:$["b"],VDialog:x["a"],VIcon:k["a"],VList:C["a"],VListItem:V["a"],VMain:I["a"],VMenu:D["a"],VProgressLinear:R["a"],VSpacer:S["a"],VToolbarItems:A["a"],VToolbarTitle:A["b"]});var E=r("8c4f"),M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[r("v-spacer"),e._l(e.filters,(function(t){return[r("searchTerm",{key:t.searchparameter,attrs:{label:t.label,expression:t.searchparameter,binding:t.binding},on:{termChange:e.searchData}})]})),r("v-autocomplete",{attrs:{items:e.$store.state.clients,"item-text":"displayName","item-value":"id",clearable:"",label:e.$t("source"),"hide-details":"",outlined:"",shaped:""},on:{"click:clear":e.searchPOS,change:e.searchPOS},model:{value:e.pos,callback:function(t){e.pos=t},expression:"pos"}})],2),r("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{headers:e.headers,items:e.patients,options:e.options,"server-items-length":e.totalPatients,"footer-props":{"items-per-page-options":[5,10,20,50],"items-per-page-text":this.$t("row_per_page")},"no-data-text":e.$t("no_data"),loading:e.loading},on:{"update:options":function(t){e.options=t},"click:row":e.clickIt}})],1)},q=[],O=r("b85c"),T=(r("2ca0"),r("a434"),r("7db0"),r("d3b7"),r("9911"),r("ac1f"),r("1276"),r("a15b"),r("4de4"),r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.binding?r("v-select",{attrs:{loading:e.loading,label:e.label,items:e.items,outlined:"","error-messages":e.err_messages,error:e.error,shaped:"",clearable:"","hide-details":"","small-chips":"",multiple:"","item-text":"display","item-value":"code"},on:{change:function(t){return e.updateSearch()},"click:clear":function(t){return e.clearSearch()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):r("v-text-field",{attrs:{label:e.label,outlined:"","hide-details":"",shaped:"",clearable:""},on:{change:function(t){return e.updateSearch()},"click:clear":function(t){return e.clearSearch()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})}),U=[],j={name:"search-term",props:["label","expression","binding"],data:function(){return{loading:!1,items:[],error:!1,err_messages:null,value:[]}},mounted:function(){var e=this;this.binding&&(this.loading=!0,this.$fhirutils.expand(this.binding).then((function(t){e.items=t,e.loading=!1})).catch((function(t){e.error=!0,e.err_messages=t.message,e.loading=!1})))},methods:{updateSearch:function(){this.$emit("termChange",this.expression,this.value)},clearSearch:function(){this.$emit("termChange",this.expression,[])}}},B=j,F=r("b974"),L=r("8654"),Y=Object(v["a"])(B,T,U,!1,null,null,null),H=Y.exports;m()(Y,{VSelect:F["a"],VTextField:L["a"]});var z={givenName:"Given Names(s)",surname:"Surname",gender:"Gender",birth:"Birth Date",cruid:"CRUID"},G={name:"Home",mixins:[u["a"]],data:function(){return{debug:"",pos:"",search_terms:[],loading:!1,totalPatients:0,prevPage:-1,link:[],options:{itemsPerPage:10,sortBy:["family"]},rowsPerPageItems:[5,10,20,50],headers:[],filters:[],patients:[]}},watch:{options:{handler:function(){this.getData()},deep:!0}},mounted:function(){this.getData()},components:{searchTerm:H},methods:{clickIt:function(e){this.$router.push({name:"client",params:{clientId:e.id},query:{pos:this.pos}})},searchPOS:function(){this.pos?this.searchData("_tag","http://openclientregistry.org/fhir/clientid|"+this.pos):null===this.pos&&this.searchData("_tag",[])},searchData:function(e,t){if(null!==t&&-1===this.search_terms.indexOf(e+"="+encodeURIComponent(t))){if(Array.isArray(t)&&0===t.length)for(var r in this.search_terms)this.search_terms[r].startsWith(e+"=")&&this.search_terms.splice(r,1);else e&&this.search_terms.push(e+"="+encodeURIComponent(t));this.getData(!0)}},getData:function(e){var t=this;this.loading=!0;var r="";if(e&&(this.options.page=1),this.options.page>1){this.options.page===this.prevPage-1?r=this.link.find((function(e){return"previous"===e.relation})).url:this.options.page===this.prevPage+1&&(r=this.link.find((function(e){return"next"===e.relation})).url);var a=r.split("?")[1];r="/ocrux/fhir?"+a}if(""===r){var s=this.options.itemsPerPage||10,o="";for(var n in this.options.sortBy)o&&(o+=","),this.options.sortDesc[n]&&(o+="-"),o+=this.options.sortBy[n];r="/ocrux/fhir/Patient?_count="+s+"&_total=accurate&_tag:not=5c827da5-4858-4f3d-a50c-62ece001efea",this.search_terms.length>0&&(r+="&"+this.search_terms.join("&")),this.debug=r}this.prevPage=this.options.page;var i=[];this.$http.get("/ocrux/fhir/Basic/patientdisplaypage").then((function(e){var a=e.data.extension&&e.data.extension.find((function(e){return"http://ihris.org/fhir/StructureDefinition/opencrReportDisplay"===e.url}));if(t.headers=[],t.filters=[],a){var s=a.extension&&a.extension.filter((function(e){return"http://ihris.org/fhir/StructureDefinition/display"===e.url}));if(s){var o,n=Object(O["a"])(s);try{for(n.s();!(o=n.n()).done;){var c=o.value,l=c.extension&&c.extension.find((function(e){return"label"===e.url})),u=c.extension&&c.extension.find((function(e){return"fhirpath"===e.url})),d=c.extension&&c.extension.find((function(e){return"valueset"===e.url})),h=c.extension&&c.extension.find((function(e){return"searchable"===e.url})),v=c.extension&&c.extension.find((function(e){return"searchparameter"===e.url})),p=void 0;if(l.valueString===z.givenName&&(p=t.$t("given_names")),l.valueString===z.surname&&(p=t.$t("surname")),l.valueString===z.gender&&(p=t.$t("gender")),l.valueString===z.birth&&(p=t.$t("birth_date")),l.valueString===z.cruid&&(p=l.valueString),l&&u&&(i.push({text:l.valueString,fhirpath:u.valueString}),t.headers.push({text:p||l.valueString,value:l.valueString})),h&&v){var m={searchparameter:v.valueString,label:t.$t("search")+"_"+p?p:l.valueString};d&&d.valueString&&(m.binding=d.valueString),t.filters.push(m)}}}catch(f){n.e(f)}finally{n.f()}t.headers.push({text:t.$t("source"),value:"pos"})}}t.$http.get(r).then((function(e){if(t.patients=[],e.data.total>0){t.link=e.data.link;var r,a=Object(O["a"])(e.data.entry);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(!(!s.resource.link||s.resource.link&&Array.isArray(s.resource.link)&&0===s.resource.link.length||s.resource.link&&!Array.isArray(s.resource.link))){var o=s.resource.name&&s.resource.name.find((function(e){return"official"===e.use}));o||(o={});var n=s.resource.identifier.find((function(e){return e.system===Object({NODE_ENV:"production",VUE_APP_CRUID_TAG:"5c827da5-4858-4f3d-a50c-62ece001efea",VUE_APP_BROKEN_MATCH_URL:"http://clientregistry.org/brokenMatch",VUE_APP_FHIR_ROOT:"http://localhost:8081/clientregistry",VUE_APP_BACKEND_SERVER:"https://localhost:3000/OCRUX",BASE_URL:"/crux/"}).VUE_APP_SYSTEM_NIN}));n||(n={});var c=void 0;if(s.resource.meta&&s.resource.meta.tag){var l,u=Object(O["a"])(s.resource.meta.tag);try{for(u.s();!(l=u.n()).done;){var d=l.value;"http://openclientregistry.org/fhir/clientid"===d.system&&(c=d.code)}}catch(f){u.e(f)}finally{u.f()}}var h,v=t.getClientDisplayName(c),p={id:s.resource.id,pos:v},m=Object(O["a"])(i);try{for(m.s();!(h=m.n()).done;){var _=h.value,g=t.$fhirpath.evaluate(s.resource,_.fhirpath);Array.isArray(g)&&(g=g.join(", ")),2===g.split("/").length&&(g=g.split("/")[1]),p[_.text]=g}}catch(f){m.e(f)}finally{m.f()}t.patients.push(p)}}}catch(f){a.e(f)}finally{a.f()}}t.totalPatients=e.data.total,t.loading=!1}))}))}}},J=G,Z=r("c6a6"),K=r("8fea"),X=Object(v["a"])(J,M,q,!1,null,null,null),W=X.exports;m()(X,{VAutocomplete:Z["a"],VCard:w["a"],VCardTitle:$["c"],VDataTable:K["a"],VSpacer:S["a"]});var Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-tabs",{attrs:{"background-color":"secondary",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tabs-slider"),r("v-tab",{attrs:{href:"#record"}},[r("v-icon",[e._v("mdi-account")]),e._v(e._s(e.$t("record")))],1),r("v-tab",{attrs:{href:"#history"}},[r("v-icon",[e._v("mdi-history")]),e._v(e._s(e.$t("history")))],1),r("v-spacer"),r("v-toolbar-items",["6f2eac1b-5b1d-49ce-a4b7-f9089128f836"===e.uid?r("v-btn",{attrs:{color:"warning"},on:{click:function(t){return e.$router.push("/resolve/590-57-2820")}}},[r("v-badge",{attrs:{icon:"mdi-alert",color:"error"}},[e._v(e._s(e.$t("review_potential_matches")))])],1):e._e(),e.canGoBack?r("v-btn",{attrs:{color:"secondary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.$t("back")))]):r("v-btn",{attrs:{color:"secondary"},on:{click:e.close}},[e._v(e._s(e.$t("close")))])],1),r("v-tab-item",{attrs:{value:"record"}},[r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-card",{staticClass:"mx-auto"},[r("v-carousel",{attrs:{"delimiter-icon":"mdi-account","next-icon":"mdi-account-arrow-right","prev-icon":"mdi-account-arrow-left","show-arrows-on-hover":!0},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.match_items,(function(t,a){return r("v-carousel-item",{key:a+"-"+t.id},[r("v-card",{staticClass:"mx-auto",attrs:{height:"100%"}},[r("v-toolbar",{attrs:{color:"secondary",dark:""}},[r("v-toolbar-title",{staticClass:"font-weight-bold"},[e._v(" CRUID: "+e._s(e.uid)+" ")]),r("v-spacer"),e._v(" "+e._s(e.selected+1)+" / "+e._s(e.match_count)+" ")],1),r("v-list",{staticStyle:{"max-height":"400px","overflow-y":"auto"},attrs:{dense:"",light:""}},[r("v-list-item",[r("v-list-item-content",[e._v(e._s(e.$t("submitting_system"))+":")]),r("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.system)+" ")])],1),e._l(t.name,(function(t,a){return r("v-list-item",{key:a+"-"+t.use},[r("v-list-item-content",[e._v(e._s(e.$t("surname"))+" ("+e._s(t.use)+")")]),r("v-list-item-content",{staticClass:"align-end text-capitalize"},[e._v(" "+e._s(t.given.join(" "))+" "+e._s(t.family)+" ")])],1)})),r("v-list-item",[r("v-list-item-content",[e._v(e._s(e.$t("gender"))+":")]),r("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.gender)+" ")])],1),r("v-list-item",[r("v-list-item-content",[e._v(e._s(e.$t("birth_date"))+":")]),r("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.birthdate)+" ")])],1),e._l(t.telecom,(function(t,a){return r("v-list-item",{key:a+"-"+t.system},[r("v-list-item-content",{staticClass:"text-capitalize"},[e._v(" "+e._s(t.system)+": ")]),r("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.value)+" ")])],1)})),e._l(t.identifier,(function(t,a){return r("v-list-item",{key:a+"-"+t.system},[r("v-list-item-content",[e._v(e._s(t.name)+":")]),r("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.value)+" ")])],1)})),e._l(t.extension,(function(t,a){return r("v-list-item",{key:a+"-"+t.name},[r("v-list-item-content",[e._v(e._s(e.$t(t.name))+":")]),r("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.value)+" ")])],1)}))],2)],1)],1)})),1)],1)],1),r("v-col",{attrs:{cols:"6"}},[r("v-card",{staticClass:"mx-auto"},[r("v-toolbar",{attrs:{color:"accent",dark:""}},[r("v-toolbar-title",[e._v(e._s(e.$t("matched_records"))+" ")])],1),r("v-data-table",{staticClass:"elevation-1 text-capitalize",attrs:{headers:e.match_headers,items:e.match_items,"items-per-page":20,"footer-props":{"items-per-page-text":this.$t("row_per_page")},"no-data-text":e.$t("no_data"),"item-key":"fid","show-select":""},model:{value:e.breaks,callback:function(t){e.breaks=t},expression:"breaks"}}),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"warning",attrs:{disabled:0===e.breaks.length||e.match_items.length<2},on:{click:function(t){return e.breakMatch()}}},[e._v(" "+e._s(e.$t("break_matches"))+" ")])],1)],1)],1),r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"mx-auto"},[r("v-toolbar",{attrs:{color:"warning",dark:""}},[r("v-toolbar-title",[e._v(" "+e._s(e.$t("broken_matches")))])],1),r("v-data-table",{staticClass:"elevation-1 text-capitalize",attrs:{headers:e.match_headers,items:e.break_items,"items-per-page":20,"footer-props":{"items-per-page-text":this.$t("row_per_page")},"no-data-text":e.$t("no_data"),"item-key":"id","show-select":""},model:{value:e.unbreaks,callback:function(t){e.unbreaks=t},expression:"unbreaks"}}),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"accent",attrs:{disabled:0===e.unbreaks.length},on:{click:function(t){return e.revertBreak()}}},[e._v(" "+e._s(e.$t("revert_break"))+" ")])],1)],1)],1)],1)],1),r("v-tab-item",{attrs:{value:"history"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"mx-auto"},[r("v-toolbar",{attrs:{color:"secondary",dark:""}},[r("v-toolbar-title",[e._v(e._s(e.$t("history")))])],1),r("v-expansion-panels",{attrs:{popout:""}},e._l(e.matchEvents,(function(t,a){return r("v-expansion-panel",{key:a},[r("v-expansion-panel-header",["submittedResource"===t.type?[e._v(" "+e._s(e.$t("submitted_resource"))+" ")]:e._e(),"breakMatch"===t.type?[e._v(" "+e._s(e.$t("break_matche"))+" ")]:e._e(),"unBreak"===t.type?[e._v(" "+e._s(e.$t("revert_break"))+" ")]:e._e(),e._v(" "+e._s(e.$t("event"))+" "+e._s(e._f("moment")(t.recorded,"Do MMM YYYY h:mm:ss a")))],2),r("v-expansion-panel-content",["submittedResource"!==t.type?[e._v(" "+e._s(e.$t("user"))+": "+e._s(t.username)+" "),r("br")]:e._e(),e._v(" Operation: "),r("b",[e._v(e._s(t.operation))]),e._v(" "),r("br"),e._v(" "+e._s(e.$t("operation_time"))+" "+e._s(e._f("moment")(t.recorded,"Do MMM YYYY h:mm:ss a"))+" "),r("br"),e._v(" "+e._s(e.$t("patient_status"))+" : "),"0"===t.outcomeCode?[r("v-chip",{attrs:{color:"green",dark:""}},[e._v(" "+e._s(t.outcome)+" ")])]:[r("v-chip",{attrs:{color:"red",dark:""}},[e._v(" "+e._s(t.outcome)+" ")])],r("br"),e._v(" IP Address: "+e._s(t.ipaddress)+" "),r("br"),"breakMatch"===t.type?r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-card",{attrs:{elevation:"12",color:"green",hover:""}},[r("v-card-text",{staticClass:"white--text"},[e._v(" Break "),r("br"),r("b",[e._v(e._s(t.break))])])],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-card",{attrs:{elevation:"12",color:"red",hover:""}},[r("v-card-text",{staticClass:"white--text"},[e._v(" Old CRUID "),r("br"),r("b",[e._v(e._s(t.CRUID))])])],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-card",{attrs:{elevation:"12",color:"red",hover:""}},[r("v-card-text",{staticClass:"white--text"},[e._v(" Broken From "),r("br"),r("b",[e._l(t.breakFrom,(function(t){return[e._v(" => "+e._s(t)+" ")]}))],2)])],1)],1)],1):e._e(),"unBreak"===t.type?r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-card",{attrs:{elevation:"12",color:"green",hover:""}},[r("v-card-text",{staticClass:"white--text"},[e._v(" Reverting "),r("br"),r("b",[e._v(e._s(t.unBreak))])])],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-card",{attrs:{elevation:"12",color:"red",hover:""}},[r("v-card-text",{staticClass:"white--text"},[e._v(" Reverting From CRUID "),r("br"),r("b",[e._v(e._s(t.unBreakFromCRUID))])])],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-card",{attrs:{elevation:"12",color:"red",hover:""}},[r("v-card-text",{staticClass:"white--text"},[e._v(" Reverting From "),r("br"),r("b",[e._l(t.unBreakFrom,(function(t){return[e._v(" => "+e._s(t)+" ")]}))],2)])],1)],1)],1):e._l(t.matchData,(function(t,a){return r("v-row",{key:a},[r("v-col",{attrs:{cols:"6"}},[r("v-card",{attrs:{elevation:"12",hover:""}},[r("v-card-title",{attrs:{"primary-title":""}},[e._v(" Decision Rule "+e._s(++a)+" => Matching Type:   "),r("b",[e._v(" "+e._s(t.matchingType))])]),r("v-card-text",[r("v-data-table",{attrs:{headers:e.matchRuleHeaders,items:t.decisionRule,"items-per-page":20,"item-key":"id"},scopedSlots:e._u([{key:"item.details",fn:function(a){var s=a.item;return[s.details.algorithm?[e._v(" Algorithm - "+e._s(s.details.algorithm)),r("br")]:e._e(),s.details.threshold?[e._v(" Threshold "),r("v-chip",{attrs:{color:"red",dark:""}},[e._v(" "+e._s(s.details.threshold)+" ")]),r("br")]:e._e(),"probabilistic"===t.matchingType?[r("b",[e._v("mValue")]),r("v-chip",{attrs:{color:"green",dark:""}},[e._v(" "+e._s(s.details.mValue)+" ")]),e._v(" "),r("b",[e._v("- uValue")]),r("v-chip",{attrs:{color:"blue",dark:""}},[e._v(" "+e._s(s.details.uValue)+" ")]),r("br")]:e._e(),s.details.fhirpath?[e._v(" FHIR Path - "+e._s(s.details.fhirpath)+" ")]:e._e(),r("br"),r("br")]}}],null,!0)})],1)],1)],1),r("v-col",{attrs:{cols:"6"}},[r("v-switch",{attrs:{label:"View Advanced Details"},model:{value:e.advancedView,callback:function(t){e.advancedView=t},expression:"advancedView"}}),e.advancedView?[r("v-card",[r("v-card-text",[r("v-textarea",{attrs:{filled:"",color:"deep-purple",label:"Elasticsearch Query",rows:"10",value:t.query}})],1)],1),r("v-card",[r("v-card-text",[r("v-textarea",{attrs:{filled:"",color:"deep-purple",label:"Elasticsearch Automatches Results",rows:"10",value:t.autoMatches}})],1)],1),r("v-card",[r("v-card-text",[r("v-textarea",{attrs:{filled:"",color:"deep-purple",label:"Elasticsearch Potential Matches Results",rows:"10",value:t.potentialMatches}})],1)],1),r("v-card",[r("v-card-text",[r("v-textarea",{attrs:{filled:"",color:"deep-purple",label:"Elasticsearch Conflicts Matches Results",rows:"10",value:t.conflictsMatchResults}})],1)],1)]:e._e()],2)],1)}))],2)],1)})),1)],1)],1)],1)],1)],1)],1)},ee=[],te=r("7709"),re=te["a"],ae=r("5e66"),se=r("3e35"),oe=r("cc20"),ne=r("62ad"),ie=r("a523"),ce=r("cd55"),le=r("49e2"),ue=r("c865"),de=r("0393"),he=r("5d23"),ve=r("0fd9"),pe=r("b73d"),me=r("71a3"),fe=r("c671"),_e=r("fe57"),ge=r("9a96"),be=r("a844"),ye=r("71d9"),we=Object(v["a"])(re,Q,ee,!1,null,null,null),$e=we.exports;m()(we,{VBadge:b["a"],VBtn:y["a"],VCard:w["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCarousel:ae["a"],VCarouselItem:se["a"],VChip:oe["a"],VCol:ne["a"],VContainer:ie["a"],VDataTable:K["a"],VExpansionPanel:ce["a"],VExpansionPanelContent:le["a"],VExpansionPanelHeader:ue["a"],VExpansionPanels:de["a"],VIcon:k["a"],VList:C["a"],VListItem:V["a"],VListItemContent:he["a"],VRow:ve["a"],VSpacer:S["a"],VSwitch:pe["a"],VTab:me["a"],VTabItem:fe["a"],VTabs:_e["a"],VTabsSlider:ge["a"],VTextarea:be["a"],VToolbar:ye["a"],VToolbarItems:A["a"],VToolbarTitle:A["b"]});var xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" "+e._s(e.$t("menu_action_required"))+" "),r("v-spacer")],1),r("v-card-title",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{headers:e.headers,items:e.reviews,options:e.options,"footer-props":{"items-per-page-options":[5,10,20,50],"items-per-page-text":this.$t("row_per_page")},"no-data-text":e.$t("no_data"),loading:e.loading,search:e.search},on:{"update:options":function(t){e.options=t},"click:row":e.clickIt},scopedSlots:e._u([{key:"item.uid",fn:function(t){var a=t.item;return[r("router-link",{attrs:{to:"/resolve/"+a.id+"?flagType="+a.reasonCode}},[e._v(e._s(a.uid))])]}},{key:"item.reason",fn:function(t){var a=t.item;return[r("span",{staticClass:"text-uppercase"},[e._v(e._s(a.reason))])]}},{key:"item.source",fn:function(t){var a=t.item;return[r("span",{staticClass:"text-uppercase"},[e._v(e._s(e.getClientDisplayName(a.source)))])]}},{key:"item.date",fn:function(t){var r=t.item;return[e._v(" "+e._s(e._f("moment")(r.date,"MMMM DD YYYY HH:mm:ssZ"))+" ")]}}])})],1)},ke=[],Ce={mixins:[u["a"]],name:"Review",components:{},data:function(){return{reviews:[],debug:"",search:"",loading:!1,prevPage:-1,link:[],options:{itemsPerPage:10,sortBy:["family"]},rowsPerPageItems:[5,10,20,50],headers:[{text:this.$t("cr_id"),value:"uid"},{text:this.$t("surname"),value:"family"},{text:this.$t("given_names"),value:"given"},{text:this.$t("source"),value:"source"},{text:this.$t("source_id"),value:"source_id"},{text:this.$t("reason"),value:"reason"},{text:this.$t("date_flagged"),value:"date"}]}},methods:{getReviews:function(){var e=this;this.loading=!0,l.a.get("/ocrux/match/get-match-issues").then((function(t){e.reviews=t.data,e.loading=!1}))},clickIt:function(e){this.$router.push({name:"review",params:{clientId:e.uid}})}},created:function(){this.getReviews()}},Ve=Ce,Ie=Object(v["a"])(Ve,xe,ke,!1,null,null,null),De=Ie.exports;m()(Ie,{VCard:w["a"],VCardTitle:$["c"],VDataTable:K["a"],VSpacer:S["a"],VTextField:L["a"]});var Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" "+e._s(e.$t("menu_auto_matches"))+" "),r("v-spacer")],1),r("v-card-title",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{headers:e.headers,items:e.automatches,options:e.options,"footer-props":{"items-per-page-options":[5,10,20,50],"items-per-page-text":this.$t("row_per_page")},"no-data-text":e.$t("no_data"),loading:e.loading,search:e.search},on:{"update:options":function(t){e.options=t},"click:row":e.clickIt},scopedSlots:e._u([{key:"item.uid",fn:function(t){var a=t.item;return[r("router-link",{attrs:{to:"/resolve/"+a.id+"?flagType="+a.reasonCode}},[e._v(e._s(a.uid))])]}},{key:"item.reason",fn:function(t){var a=t.item;return[r("span",{staticClass:"text-uppercase"},[e._v(e._s(a.reason))])]}},{key:"item.source",fn:function(t){var a=t.item;return[r("span",{staticClass:"text-uppercase"},[e._v(e._s(e.getClientDisplayName(a.source)))])]}},{key:"item.date",fn:function(t){var r=t.item;return[e._v(" "+e._s(e._f("moment")(r.date,"MMMM DD YYYY HH:mm:ssZ"))+" ")]}}])})],1)},Se=[],Ae={mixins:[u["a"]],name:"Automatch",components:{},data:function(){return{automatches:[],debug:"",search:"",loading:!1,prevPage:-1,link:[],options:{itemsPerPage:10,sortBy:["family"]},rowsPerPageItems:[5,10,20,50],headers:[{text:this.$t("cr_id"),value:"uid"},{text:this.$t("surname"),value:"family"},{text:this.$t("given_names"),value:"given"},{text:this.$t("source"),value:"source"},{text:this.$t("source_id"),value:"source_id"},{text:this.$t("reason"),value:"reason"},{text:this.$t("date_flagged"),value:"date"}]}},methods:{getAutomatches:function(){var e=this;this.loading=!0,l.a.get("/ocrux/match/get-new-auto-matches").then((function(t){e.automatches=t.data,e.loading=!1}))},clickIt:function(e){this.$router.push({name:"automatch",params:{clientId:e.uid}})}},created:function(){this.getAutomatches()}},Ne=Ae,Pe=Object(v["a"])(Ne,Re,Se,!1,null,null,null),Ee=Pe.exports;m()(Pe,{VCard:w["a"],VCardTitle:$["c"],VDataTable:K["a"],VSpacer:S["a"],VTextField:L["a"]});var Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-navigation-drawer",{attrs:{color:"secondary",right:"",permanent:"",clipped:"",app:""}},[r("v-list",[r("v-list-item",[r("v-btn",{attrs:{color:"accent"},on:{click:function(t){e.showMatrix=!0,e.$vuetify.goTo(e.$refs.scoreMatrix)}}},[e._v(e._s(e.$t("show_scores_matrix"))+" ")])],1),r("v-list-item",[r("v-btn",{attrs:{color:"success"},on:{click:function(t){e.showReview=!0}}},[e._v(e._s(e.$t("save_changes"))+" ")])],1),r("v-divider"),r("v-list-item",[r("h3",{staticClass:"white--text"},[e._v("Options")])]),r("v-list-item",[r("v-switch",{attrs:{dark:"",label:e.$t("simplified_naming")},on:{change:e.setupCRIDList},model:{value:e.useNickname,callback:function(t){e.useNickname=t},expression:"useNickname"}})],1),r("v-list-item",[r("v-switch",{attrs:{dark:"",label:e.$t("include_real_crid")},on:{change:e.setupCRIDList},model:{value:e.includeCRID,callback:function(t){e.includeCRID=t},expression:"includeCRID"}})],1)],1)],1),r("v-dialog",{attrs:{value:e.showReview,"max-width":"900",persistent:""}},[r("v-card",{attrs:{light:""}},[r("v-card-title",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.$t("review_changes"))+" ")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{icon:""},on:{click:function(t){e.showReview=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1)],1)],1),e.bucketsModified?r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.review_headers,items:e.review_list,"disable-pagination":!0,"hide-default-footer":!0,"no-data-text":e.$t("no_data")}}):r("v-card-text",[e._v(" "+e._s(e.$t("confirm_remove_flag"))+" ")]),r("v-card-actions",[r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.showReview=!1}}},[e._v(" "+e._s(e.$t("cancel"))+" ")]),r("v-spacer"),r("v-btn",{attrs:{color:"success"},on:{click:e.saveChanges}},[e._v(" "+e._s(e.$t("save"))+" ")])],1)],1)],1),r("v-dialog",{attrs:{value:e.cohortPopup,width:"500"}},[r("v-card",{attrs:{light:""}},[r("v-card-title",{staticClass:"secondary lighten-1",attrs:{color:"white","primary-title":""}},[e._v(" "+e._s(e.$t("move_all"))+" ")]),e._v(" "+e._s(e.$t("confirm_move_all_to_new"))+" "),r("v-card-text"),r("v-card-actions",[r("v-btn",{attrs:{color:"info"},on:{click:e.copyClient}},[e._v(e._s(e.$t("move_one")))]),r("v-spacer"),r("v-btn",{attrs:{color:"warning"},on:{click:e.copyCohort}},[e._v(e._s(e.$t("move_all_records")))])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.copyCohortInfo=null,e.cohortPopup=!1}}},[e._v(e._s(e.$t("cancel")))])],1)],1)],1),e._l(e.crids,(function(t,a){return r("v-row",{key:a},[r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[r("v-toolbar",{attrs:{color:"primary darken-1",dark:""}},[e.useNickname?r("v-toolbar-title",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.nickname[a])+" ")]):e._e(),r("v-spacer"),r("v-toolbar-title",{staticClass:"font-weight-bold"},[e._v(" CR ID: "+e._s(a)+" ")])],1)],1),r("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{headers:e.headers,items:t,"disable-pagination":!0,"hide-default-footer":!0,loading:e.loading},scopedSlots:e._u([{key:"header.uid",fn:function(t){return[e._v(" "+e._s(e.cridHeader)+" ")]}},{key:"item.uid",fn:function(t){var a=t.item;return[r("v-select",{key:a.source+a.source_id,attrs:{value:a.uid,items:e.crid_list,"success-messages":"Original: "+e.cridDisplay(a.ouid),dense:""},on:{change:function(t){return e.moveClient(t,a)}}})]}},{key:"item.source_id",fn:function(t){var a=t.item;return[r("a",{on:{click:function(t){return e.goTo("client",{clientId:a.uid,sourceId:a.source_id})}}},[e._v(e._s(a.source_id))])]}},{key:"item.view",fn:function(t){var a=t.item;return[r("v-switch",{attrs:{"hide-details":""},on:{change:function(t){e.showCard[a.source_id]&&e.$vuetify.goTo(e.$refs.fullCards)}},model:{value:e.showCard[a.source_id],callback:function(t){e.$set(e.showCard,a.source_id,t)},expression:"showCard[item.source_id]"}})]}},{key:"item.score",fn:function(t){var a=t.item;return[r("v-switch",{attrs:{"hide-details":""},model:{value:e.showScore[a.source_id],callback:function(t){e.$set(e.showScore,a.source_id,t)},expression:"showScore[item.source_id]"}})]}},{key:"item.birthDate",fn:function(t){var r=t.item;return[e._v(" "+e._s(e._f("moment")(r.birthDate,"MMMM DD YYYY"))+" ")]}}],null,!0)})],1)],1)],1)})),r("v-row",{ref:"scoreMatrix"},[e.showMatrix?r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[r("v-toolbar",{attrs:{color:"accent",dark:""}},[r("v-toolbar-title",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.$t("scores_matrix"))+" ")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{icon:""},on:{click:function(t){e.showMatrix=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1)],1)],1),r("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{headers:e.score_headers,items:e.score_matrix,"disable-pagination":!0,"hide-default-footer":!0}})],1)],1):e._e()],1),r("v-row",{ref:"fullCards"},[e._l(e.resolves,(function(t){return[e.showCard[t.source_id]?r("v-col",{key:t.source_id,attrs:{cols:"4"}},[r("v-card",{ref:t.source+t.source_id,refInFor:!0,staticClass:"mx-auto",attrs:{light:"",id:t.source+t.source_id}},[r("v-toolbar",{attrs:{color:"secondary",dark:""}},[r("v-toolbar-title",{staticClass:"font-weight-bold"},[e._v(" Source: "+e._s(t.source)+" "+e._s(t.source_id)+" ")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{icon:""},on:{click:function(r){e.showCard[t.source_id]=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1)],1),r("v-list",{attrs:{dense:"",light:"",height:"100%"}},[e._l(e.fields,(function(a,s){return r("v-list-item",{key:s},[r("v-list-item-content",[e._v(e._s(a)+":")]),e.dates[s]?r("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(e._f("moment")(t[s],"MMMM Do YYYY"))+" ")]):r("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t[s])+" ")])],1)})),r("v-divider"),r("v-list-item",[r("h5",{staticClass:"text-uppercase"},[e._v("Scores")])]),e._l(e.filteredScores(t.scores),(function(a,s){return r("v-list-item",{key:t.source_id+"-"+s},[r("v-list-item-content",[e._v(e._s(e.getSource(s)))]),r("v-list-item-content",[e._v(e._s(s)+":")]),r("v-list-item-content",[e._v(e._s(a))])],1)}))],2)],1)],1):e._e()]}))],2)],2)},qe=[],Oe=r("3835"),Te=(r("b64b"),r("00b4"),r("159b"),r("4fadc"),r("d81d"),"Assign to new CR ID"),Ue="New CR ID ",je=function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[r],e[r]=a}},Be={name:"Resolve",mixins:[u["a"]],components:{},data:function(){return{crids:{},crid_list:[],showCard:{},showScore:{},showMatrix:!1,showReview:!1,cohortPopup:!1,resolves:[],loading:!1,newIdx:1,headers:[{text:this.cridHeader,value:"uid",sortable:!1},{text:"Source",value:"source"},{text:this.$t("source_id"),value:"source_id"},{text:this.$t("surname"),value:"family"},{text:this.$t("given_names"),value:"given"},{text:this.$t("birth_date"),value:"birthDate"},{text:this.$t("gender"),value:"gender"},{text:this.$t("full_view"),value:"view",sortable:!1},{text:"Scores",value:"score",sortable:!1}],dates:{birthDate:!0},fields:{source:this.$t("submitting_system"),source_id:this.$t("source_id"),family:this.$t("surname"),given:this.$t("given_names"),gender:this.$t("gender"),birthDate:this.$t("birth_date"),phone:this.$t("phone")},score_matrix:[],score_headers:[{text:"Source",value:"name"}],review_headers:[{text:"Source",value:"source"},{text:this.$t("source_id"),value:"source_id"},{text:this.$t("original_cr_id"),value:"ouid"},{text:this.$t("new_cr_id"),value:"uid"}],review_list:[],copyCohortInfo:null,useNickname:!0,includeCRID:!1,available_nicknames:["Aluminum","Beryllium","Carbon","Dysprosium","Europium","Flourine","Gallium","Hydrogen","Iron","Krypton","Lithium","Magnesium","Nitrogen","Oxygen","Phosphorus","Copper","Sodium","Titanium","Uranium","Vanadium","Xenon","Gold","Zinc"],nickname:{}}},watch:{showScore:{handler:function(e){for(var t=this,r=function(){var r=s[a];e[r]?t.headers.find((function(e){return e.value===r}))||t.headers.push({text:t.getSource(r)+" "+r,value:r}):t.headers=t.headers.filter((function(e){return e.value!==r}))},a=0,s=Object.keys(e);a<s.length;a++)r()},deep:!0}},created:function(){var e=this;this.$store.state.progress.enable=!0,this.$store.state.progress.width="300px",this.$store.state.progress.title="autoMatches"===this.$route.query.flagType?this.$t("loading_auto"):this.$t("loading_potential"),l.a.get("/ocrux/match/potential-matches/".concat(this.$route.params.clientId)).then((function(t){var r=t.data;if("autoMatches"===e.$route.query.flagType){var a=r.find((function(t){return t.id===e.$route.params.clientId}));a&&(r=r.filter((function(e){return e.uid===a.uid})))}for(var s=/^extension_/,o=[],n=0;n<r.length;n++){var i=r[n];for(var c in i)s.test(c)&&(o.push(c),e.$set(e.fields,c,e.$t(c)))}var l=/^identifier/;for(var u in r[0])l.test(u)&&e.$set(e.fields,u,e.$t(u));e.resolves=r,je(e.available_nicknames),e.organizeResolves(!0),e.$store.state.progress.enable=!1})).catch((function(){e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg=e.$t("something_wrong"),e.$store.state.alert.type="error"}))},computed:{cridHeader:function(){return this.useNickname?this.$t("Temporary_cr_id")+(this.includeCRID?" / Actual CR ID":""):"CR ID"},filteredScores:function(){var e=this;return function(t){var r={};return Object.entries(t).forEach((function(t){var a=Object(Oe["a"])(t,2),s=a[0],o=a[1];null!==e.getSource(s)&&""!==e.getSource(s)&&(r[s]=o)})),r}},bucketsModified:function(){var e,t=Object(O["a"])(this.resolves);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.uid!==r.ouid)return!0}}catch(a){t.e(a)}finally{t.f()}return!1}},methods:{organizeResolves:function(e){this.loading=!0;for(var t=0,r=Object.keys(this.crids);t<r.length;t++){var a=r[t];this.crids[a]=[]}this.review_list=[];var s,o=Object(O["a"])(this.resolves);try{for(o.s();!(s=o.n()).done;){var n=s.value;if(e){var i={};i.name=n.source+" "+n.source_id,this.score_headers.push({text:i.name,value:n.source_id});for(var c=0,l=Object.keys(n.scores);c<l.length;c++){var u=l[c];n[u]=n.scores[u],i[u]=n.scores[u]}this.score_matrix.push(i),n.ouid=n.uid}this.crids[n.uid]||(this.crids[n.uid]=[],this.nickname[n.uid]=this.available_nicknames.pop()),this.crids[n.uid].push(n),n.ouid!==n.uid&&this.review_list.push(n)}}catch(d){o.e(d)}finally{o.f()}this.setupCRIDList(),this.loading=!1},setupCRIDList:function(){var e=this;this.crid_list=Object.keys(this.crids).map((function(t){return{text:e.cridDisplay(t),value:t}})),this.crid_list.push({divider:!0}),this.crid_list.push({text:Te,value:Te})},cridDisplay:function(e){return this.useNickname?this.nickname[e]+(this.includeCRID?" ("+e+")":""):e},getSource:function(e){var t=this.resolves.find((function(t){return t.source_id===e}));return t?t.source:""},moveClient:function(e,t){this.copyCohortInfo={old_id:t.uid,new_id:e,item:t},this.cohortPopup=!0},copyClient:function(){if(this.copyCohortInfo){var e=this.copyCohortInfo.item;this.copyCohortInfo.new_id===Te?(e.uid=Ue+this.newIdx,this.nickname[e.uid]=this.available_nicknames.pop(),this.newIdx++):e.uid=this.copyCohortInfo.new_id,this.organizeResolves()}this.copyCohortInfo=null,this.cohortPopup=!1},copyCohort:function(){var e=this;if(this.copyCohortInfo){this.copyCohortInfo.new_id===Te&&(this.copyCohortInfo.new_id=Ue+this.newIdx,this.nickname[this.copyCohortInfo.new_id]=this.available_nicknames.pop(),this.newIdx++);var t,r=Object(O["a"])(this.resolves.filter((function(t){return t.uid===e.copyCohortInfo.old_id})));try{for(r.s();!(t=r.n()).done;){var a=t.value;a.uid=this.copyCohortInfo.new_id}}catch(s){r.e(s)}finally{r.f()}this.organizeResolves()}this.copyCohortInfo=null,this.cohortPopup=!1},goTo:function(e,t){var r=this.$router.resolve({name:e,params:t});window.open(r.href,"_blank")},saveChanges:function(){var e=this;this.$store.state.progress.enable=!0,this.$store.state.progress.title=this.$t("saving");var t=!0;this.bucketsModified&&(t=!1);var r={resolvingFrom:this.$route.params.clientId,resolves:this.resolves,removeFlag:t,flagType:this.$route.query.flagType};l.a.post("/ocrux/match/resolve-match-issue",r).then((function(){e.countMatchIssues(),e.countNewAutoMatches(),e.showReview=!1,e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg=e.$t("operation_successful"),e.$store.state.alert.type="success"})).catch((function(t){e.showReview=!1,e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg=e.$t("operation_failed"),e.$store.state.alert.type="error",console.log(t)}))}}},Fe=Be,Le=r("ce7e"),Ye=r("f774"),He=Object(v["a"])(Fe,Me,qe,!1,null,null,null),ze=He.exports;m()(He,{VBtn:y["a"],VCard:w["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VCol:ne["a"],VContainer:ie["a"],VDataTable:K["a"],VDialog:x["a"],VDivider:Le["a"],VIcon:k["a"],VList:C["a"],VListItem:V["a"],VListItemContent:he["a"],VNavigationDrawer:Ye["a"],VRow:ve["a"],VSelect:F["a"],VSpacer:S["a"],VSwitch:pe["a"],VToolbar:ye["a"],VToolbarItems:A["a"],VToolbarTitle:A["b"]});var Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(" Action Required "),r("v-spacer")],1),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.csvReport,options:e.options,"footer-props":{"items-per-page-options":[5,10,20,50],"items-per-page-text":this.$t("row_per_page")},"no-data-text":e.$t("no_data"),loading:e.loading},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.date",fn:function(t){var r=t.item;return[e._v(" "+e._s(e._f("moment")(r.date,"MMMM DD YYYY HH:mm:ssZ"))+" ")]}},{key:"item.reports",fn:function(t){var a=t.item;return[r("v-card-title",{attrs:{small:""}},[r("v-btn",{attrs:{dense:"",outlined:"",rounded:"",small:""},on:{click:function(t){return e.downloadReport(a.reportId)}}},[e.downloading?r("v-progress-circular",{attrs:{indeterminate:"",color:"amber"}}):r("v-icon",{attrs:{left:""}},[e._v("mdi-microsoft-excel")]),e._v(" Download ")],1)],1)]}}])})],1)},Je=[],Ze={name:"CSVReport",components:{},data:function(){return{report_idx:1,debug:"",search:"",loading:!1,prevPage:-1,reports:{},disabled:{},options:{itemsPerPage:10,sortBy:["name"]},rowsPerPageItems:[5,10,20,50],headers:[{text:"CSV ID",value:"uuid"},{text:this.$t("csv_name"),value:"name"},{text:"Date",value:"date"},{text:this.$t("reports"),value:"reports"}],csvReport:[],downloading:!1}},created:function(){this.getCSVReport()},methods:{getCSVReport:function(){var e=this;l.a.get("/ocrux/csv/getCSVUpload").then((function(t){e.csvReport=t.data;var r,a=Object(O["a"])(e.csvReport);try{for(a.s();!(r=a.n()).done;){var s=r.value;e.reports[s.uuid]=[],e.disabled[s.uuid]=!1}}catch(o){a.e(o)}finally{a.f()}}))},downloadReport:function(e){var t=this;this.downloading=!0,l.a.get("/ocrux/csv/getCSVReport/".concat(e)).then((function(e){t.downloading=!1,window.open(e.data,"_self")}))}}},Ke=Ze,Xe=r("490a"),We=Object(v["a"])(Ke,Ge,Je,!1,null,null,null),Qe=We.exports;m()(We,{VBtn:y["a"],VCard:w["a"],VCardTitle:$["c"],VDataTable:K["a"],VIcon:k["a"],VProgressCircular:Xe["a"],VSpacer:S["a"]});var et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),r("v-flex",{attrs:{xs6:""}},[r("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[r("v-system-bar",{attrs:{color:"primary",dark:""}}),r("v-toolbar",{attrs:{color:"secondary",cards:"",dark:"",flat:""}},[r("v-card-title",{staticClass:"title font-weight-regular"},[e._v(e._s(e.$t("account_add")))])],1),r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,filled:"",color:"deep-purple",label:e.$t("given_names")},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),r("v-text-field",{attrs:{filled:"",color:"deep-purple",label:e.$t("middle_names")},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),r("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,filled:"",color:"deep-purple",label:e.$t("surname")},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),r("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:e.$t("username")},on:{blur:function(t){return e.$v.userName.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),r("v-autocomplete",{attrs:{items:e.roles,"item-text":"name","item-value":"value","error-messages":e.roleErrors,filled:"",color:"deep-purple",label:"Role"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}}),r("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("labels_Password")},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{attrs:{label:e.$t("retype_password"),required:"",type:"password",filled:"",color:"deep-purple","error-messages":e.retype_passwordErrors},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1),r("v-divider"),r("v-card-actions",[r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.form.reset()}}},[r("v-icon",[e._v("mdi-clear")]),e._v(e._s(e.$t("clear"))+" ")],1),r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{depressed:"",disabled:e.$v.$invalid,color:"deep-purple accent-4"},on:{click:function(t){return e.addUser()}}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-language ")]),e._v(e._s(e.$t("user.add"))+" ")],1)],1)],1)],1),r("v-spacer")],1)],1)},tt=[],rt=r("b5ae"),at={validations:{userName:{required:rt["required"]},role:{required:rt["required"]},retype_password:{required:rt["required"]},password:{required:rt["required"]},firstName:{required:rt["required"]},surname:{required:rt["required"]}},data:function(){return{firstName:"",otherName:"",surname:"",userName:"",role:"",password:"",retype_password:"",roles:[{name:"Admin",value:"admin"},{name:"Deduplication",value:"deduplication"}]}},computed:{firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.userName.$dirty?(!this.$v.userName.required&&e.push(this.$t("username_required")),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push(this.$("password_required")),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is missing"),e):e}},methods:{addUser:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.progress.enable=!0,this.$store.state.progress.width="300px",this.$store.state.progress.title="Saving User";var t=new FormData;t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("password",this.password),t.append("userName",this.userName),t.append("role",this.role),t.append("surname",this.surname),l.a.post("/ocrux/user/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="User added successfully",e.$store.state.alert.type="success",e.$refs.form.reset()})).catch((function(){e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="This user was not added, ensure userName is not used",e.$store.state.alert.type="error"}))}}},st=at,ot=r("0e8f"),nt=r("4bd4"),it=r("a722"),ct=r("afd9"),lt=Object(v["a"])(st,et,tt,!1,null,null,null),ut=lt.exports;m()(lt,{VAutocomplete:Z["a"],VBtn:y["a"],VCard:w["a"],VCardActions:$["a"],VCardTitle:$["c"],VContainer:ie["a"],VDivider:Le["a"],VFlex:ot["a"],VForm:nt["a"],VIcon:k["a"],VLayout:it["a"],VSpacer:S["a"],VSystemBar:ct["a"],VTextField:L["a"],VToolbar:ye["a"]});var dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("v-spacer"),r("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("mdi-close")])],1),r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.user.userName)+" ")]),r("v-card-text",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),r("v-flex",{attrs:{xs6:""}},[r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,filled:"",color:"deep-purple",label:e.$t("given_names")},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),r("v-text-field",{attrs:{filled:"",color:"deep-purple",label:e.$t("middle_names")},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),r("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,filled:"",color:"deep-purple",label:e.$t("surname")},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),r("v-autocomplete",{attrs:{items:e.roles,"item-text":"name","item-value":"value","error-messages":e.roleErrors,filled:"",color:"deep-purple",label:e.$t("user_role")},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}}),r("v-autocomplete",{attrs:{items:e.statuses,"item-text":"name","item-value":"value","error-messages":e.statusErrors,filled:"",color:"deep-purple",label:e.$t("patient_status")},on:{blur:function(t){return e.$v.status.$touch()},change:function(t){return e.$v.status.$touch()}},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1)],1),r("v-spacer")],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{depressed:"",disabled:e.$v.$invalid,color:"deep-purple accent-4"},on:{click:function(t){return e.saveChanges()}}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-language ")]),e._v(e._s(e.$t("save"))+" ")],1)],1)],1)],1),r("center",[r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),r("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1),r("v-card",{staticClass:"mx-auto",attrs:{color:"cyan lighten-5",width:"1500px"}},[r("v-card-title",{attrs:{"primary-title":"",width:"1000"}},[r("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" "+e._s(e.$t("users_list"))+" "),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}})],1)],1),r("v-card-text",[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,dark:"",loading:e.loadingUsers,"footer-props":{"items-per-page-text":this.$t("row_per_page")},"no-data-text":e.$t("no_data")},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[r("tr",[r("td",[e._v(e._s(a.firstName))]),r("td",[e._v(e._s(a.surname))]),r("td",[e._v(e._s(a.otherName))]),r("td",[e._v(e._s(a.userName))]),a.role?r("td",[e._v(e._s(a.role))]):r("td"),r("td",[e._v(e._s(a.status))]),r("td",[r("v-btn",{attrs:{small:""},on:{click:function(t){return e.edit(a)}}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v("Edit")],1)],1)])]}}])},[r("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1)},ht=[],vt={mixins:[u["a"]],validations:{role:{required:rt["required"]},firstName:{required:rt["required"]},surname:{required:rt["required"]},status:{required:rt["required"]}},data:function(){return{users:[],user:{},id:"",firstName:"",otherName:"",surname:"",role:"",status:"",roles:[{name:"Admin",value:"admin"},{name:"Deduplication",value:"deduplication"}],statuses:[{name:"Active",value:"active"},{name:"InActive",value:"inactive"}],editDialog:!1,loadingUsers:!1,searchUsers:"",alertSuccess:!1,alertFail:!1,alertMsg:""}},methods:{edit:function(e){this.user=e,this.editDialog=!0,this.firstName=e.firstName,this.otherName=e.otherName,this.surname=e.surname,this.role=e.role,this.status=e.status,this.id=e.id},saveChanges:function(){var e=this;this.$store.state.progress.enable=!0,this.$store.state.progress.width="300px",this.$store.state.progress.title="Saving Changes";var t=new FormData;t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("surname",this.surname),t.append("role",this.role),t.append("status",this.status),t.append("id",this.id),l.a.post("/ocrux/user/editUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.editDialog=!1,e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="User added successfully",e.$store.state.alert.type="success",e.$refs.form.reset(),e.getUsers()})).catch((function(){e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="This user was not added, ensure userName is not used",e.$store.state.alert.type="error"}))},getUsers:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),this.users=[],this.loadingUsers=!0,l.a.get("/ocrux/user/getUsers/").then((function(t){e.loadingUsers=!1,e.users=t.data})).catch((function(t){e.loadingUsers=!1,t.hasOwnProperty("response")&&console.log(t.response.data.error)}))}},computed:{usersHeader:function(){return[{text:this.$t("given_names"),value:"firstName"},{text:this.$t("surname"),value:"surname"},{text:this.$t("other_name"),value:"otherName"},{text:this.$t("username"),value:"username"},{text:this.$t("user_role"),value:"role"},{text:this.$t("patient_status"),value:"status"}]},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is missing"),e):e},statusErrors:function(){var e=[];return this.$v.status.$dirty?(!this.$v.status.required&&e.push("Status is missing"),e):e}},created:function(){this.getUsers()}},pt=vt,mt=Object(v["a"])(pt,dt,ht,!1,null,null,null),ft=mt.exports;m()(mt,{VAlert:f["a"],VAutocomplete:Z["a"],VBtn:y["a"],VCard:w["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VContainer:ie["a"],VDataTable:K["a"],VDialog:x["a"],VFlex:ot["a"],VForm:nt["a"],VIcon:k["a"],VLayout:it["a"],VProgressLinear:R["a"],VSpacer:S["a"],VTextField:L["a"],VToolbar:ye["a"]});var _t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),r("v-flex",{attrs:{xs6:""}},[r("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[r("v-system-bar",{attrs:{color:"primary",dark:""}}),r("v-toolbar",{attrs:{color:"secondary",cards:"",dark:"",flat:""}},[r("v-card-title",{staticClass:"title font-weight-regular"},[e._v(e._s(e.$t("account_change_password")))])],1),r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("current_password")},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{attrs:{required:"","error-messages":e.newpasswordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("new_passord")},on:{blur:function(t){return e.$v.newpassword.$touch()},change:function(t){return e.$v.newpassword.$touch()}},model:{value:e.newpassword,callback:function(t){e.newpassword=t},expression:"newpassword"}}),r("v-text-field",{attrs:{label:e.$t("retype_password"),required:"",type:"password",filled:"",color:"deep-purple","error-messages":e.retype_newpasswordErrors},on:{blur:function(t){return e.$v.retype_newpassword.$touch()},change:function(t){return e.$v.retype_newpassword.$touch()}},model:{value:e.retype_newpassword,callback:function(t){e.retype_newpassword=t},expression:"retype_newpassword"}})],1),r("v-divider"),r("v-card-actions",[r("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.form.reset()}}},[r("v-icon",[e._v("mdi-clear")]),e._v(e._s(e.$t("clear"))+" ")],1),r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{depressed:"",disabled:e.$v.$invalid,color:"deep-purple accent-4"},on:{click:function(t){return e.changePassword()}}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-language ")]),e._v(e._s(e.$t("password_change"))+" ")],1)],1)],1)],1),r("v-spacer")],1)],1)},gt=[],bt={validations:{newpassword:{required:rt["required"]},retype_newpassword:{required:rt["required"]},password:{required:rt["required"]}},data:function(){return{password:"",newpassword:"",retype_newpassword:""}},computed:{newpasswordErrors:function(){var e=[];return this.$v.newpassword.$dirty?(!this.$v.newpassword.required&&e.push(this.$t("new_password_required")),e):e},retype_newpasswordErrors:function(){var e=[];return this.$v.retype_newpassword.$dirty?(!this.$v.retype_newpassword.required&&e.push(this.$t("retype_new_password")),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push(this.$t("password_required")),e):e}},methods:{changePassword:function(){var e=this;if(this.newpassword!==this.retype_newpassword)return this.$store.state.alert.show=!0,this.$store.state.alert.width="500px",this.$store.state.alert.msg=this.$t("new_password_mismatch"),void(this.$store.state.alert.type="error");this.$store.state.progress.enable=!0,this.$store.state.progress.width="300px",this.$store.state.progress.title=this.$t("changing_password");var t=new FormData;t.append("password",this.password),t.append("username",this.$store.state.auth.username),t.append("newpassword",this.newpassword),l.a.post("/ocrux/user/changepassword/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg=e.$t("password_changed"),e.$store.state.alert.type="success",e.$refs.form.reset()})).catch((function(t){var r="";r=t.response?t.response.data:t.request?t.request:t.message?t.message:e.$t("error_occured"),e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg=r,e.$store.state.alert.type="error"}))}}},yt=bt,wt=Object(v["a"])(yt,_t,gt,!1,null,null,null),$t=wt.exports;m()(wt,{VBtn:y["a"],VCard:w["a"],VCardActions:$["a"],VCardTitle:$["c"],VContainer:ie["a"],VDivider:Le["a"],VFlex:ot["a"],VForm:nt["a"],VIcon:k["a"],VLayout:it["a"],VSpacer:S["a"],VSystemBar:ct["a"],VTextField:L["a"],VToolbar:ye["a"]});var xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("center",[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs3:""}}),r("v-flex",{attrs:{xs6:""}},[r("v-alert",{attrs:{type:"error",value:e.authStatus}},[e._v(" "+e._s(e.$t("auth_failed"))+" ")])],1)],1),r("v-card",{attrs:{width:"430px",hover:""}},[r("v-card-title",{attrs:{"primary-title":""}},[r("v-toolbar",{staticStyle:{color:"white"},attrs:{color:"primary"}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs2:"","text-xs-left":""}},[r("v-icon",{attrs:{"x-large":"",color:"white"}},[e._v(" mdi-lock ")])],1),r("v-flex",{attrs:{xs9:"","text-xs-right":""}},[r("b",[e._v(" "+e._s(e.$t("login")))])])],1)],1)],1),r("v-card-text",[r("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[r("v-text-field",{attrs:{required:"",filled:"",color:"deep-purple",label:e.$t("labels_Username"),"error-messages":e.usernameErrors},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.username.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{required:"",filled:"",type:"password",color:"deep-purple",label:e.$t("labels_Password"),"error-messages":e.passwordErrors},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),r("v-card-actions",[r("v-toolbar",[r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{color:"primary",depressed:"",disabled:e.$v.$invalid},on:{click:function(t){return e.authenticate()}}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-lock-open-variant")]),e._v(" "+e._s(e.$t("login"))+" ")],1)],1)],1)],1)],1)],1)},kt=[],Ct={mixins:[u["a"]],validations:{username:{required:rt["required"]},password:{required:rt["required"]}},data:function(){return{username:"",password:"",authStatus:!1}},methods:{authenticate:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password);var r={username:this.username,password:this.password};l()({method:"POST",url:"/ocrux/user/authenticate",params:r}).then((function(t){e.countMatchIssues(),e.countNewAutoMatches(),e.getClients(),e.$store.state.auth.token=t.data.token,e.$store.state.auth.username=e.username,e.$store.state.auth.userID=t.data.userID,e.$store.state.auth.role=t.data.role,i.a.config("30d"),i.a.set("token",e.$store.state.auth.token,"infinity"),i.a.set("userID",e.$store.state.auth.userID,"infinity"),i.a.set("username",e.$store.state.auth.username,"infinity"),e.$store.state.auth.role=t.data.role,t.data.token?(e.$store.state.denyAccess=!1,e.$router.push({name:"home"})):e.authStatus=!0})).catch((function(t){if(e.$store.state.progress.enable=!1,e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg=e.$t("login_failed"),e.$store.state.alert.type="error",t.hasOwnProperty("response"))throw t}))}},computed:{usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push(this.$t("username_required")),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push(this.$t("password_required")),e):e}}},Vt=Ct,It=Object(v["a"])(Vt,xt,kt,!1,null,null,null),Dt=It.exports;m()(It,{VAlert:f["a"],VBtn:y["a"],VCard:w["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:$["c"],VContainer:ie["a"],VFlex:ot["a"],VForm:nt["a"],VIcon:k["a"],VLayout:it["a"],VSpacer:S["a"],VTextField:L["a"],VToolbar:ye["a"]});var Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xs":""}})},St=[],At={mounted:function(){this.$store.state.auth.token="",i.a.remove("token"),i.a.remove("userID"),i.a.remove("role"),i.a.remove("username"),this.$router.push("login"),this.$store.state.denyAccess=!0}},Nt=At,Pt=Object(v["a"])(Nt,Rt,St,!1,null,null,null),Et=Pt.exports;m()(Pt,{VContainer:ie["a"]});var Mt=r("2f62");a["a"].use(Mt["a"]);var qt=new Mt["a"].Store({state:{totalMatchIssues:0,totalAutoMatches:0,clients:[],systemURI:{},auth:{username:"",userID:"",role:"",token:""},alert:{width:"800px",show:!1,msg:"",type:"success",dismisible:!0,transition:"scale-transition"},progress:{enable:!1,width:"300",title:""},denyAccess:!0,dialogError:!1,errorTitle:"",errorDescription:"",errorColor:"primary",dynamicProgress:!1,csvs:[{uid:"03861b8b-1112-45e7-bb33-529c8ae928f8",name:"EMR_1.csv",date:"2021-01-29T10:23:14Z"},{uid:"0e3a637f-e0b1-4fb1-8635-4cab46e33f07",name:"Labs.csv",date:"2021-02-02T14:41:28Z"},{uid:"2ac2c4ad-1893-40ed-9b54-5002ccc46e2b",name:"EMR_2.csv",date:"2021-01-14T08:56:31Z"}]}});l.a.interceptors.request.use((function(e){var t=qt.state.auth.token;return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),l.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response.status;return 401===t&&(qt.state.auth.token="",i.a.remove("token"),Ut.push("login")),Promise.reject(e)})),a["a"].use(E["a"]);var Ot=[{path:"/",name:"home",component:W},{path:"/client/:clientId",name:"client",component:$e},{path:"/review",name:"review",component:De},{path:"/automatch",name:"automatch",component:Ee},{path:"/resolve/:clientId?",name:"resolve",component:ze},{path:"/csvreport",name:"csvreport",component:Qe},{path:"/addUser",name:"AddUser",component:ut},{path:"/usersList",name:"usersList",component:ft},{path:"/changePassword",name:"ChangePassword",component:$t},{path:"/login",name:"Login",component:Dt},{path:"/logout",name:"Logout",component:Et}],Tt=new E["a"]({routes:Ot});Tt.beforeEach((function(e,t,r){if(qt.state.auth.token||i.a.get("token")&&"null"!==i.a.get("token")&&i.a.get("userID")&&"null"!==i.a.get("userID"))r();else{if(qt.state.denyAccess=!0,"/Login"===e.path)return r();r({path:"/Login"})}}));var Ut=Tt,jt=r("f309");a["a"].use(jt["a"]);var Bt=new jt["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:{base:"#569fd3",darken1:"0d3552",darken2:"011b2d",lighten1:"ddecf6",lighten2:"f4f7f9"},secondary:{base:"#5f6062",darken1:"04070e",lighten1:"e5e5e5"},accent:"#78496a",error:"#b32317",info:"#005595",success:"#8a8d35",warning:"#d06f1a"}}}}),Ft=(r("3ca3"),r("ddb0"),r("caad"),r("2532"),r("fb6a"),r("4e827"),r("d9e2"),r("0551")),Lt=r("bc3a"),Yt={_code_cache:{},_code_loading:{},_setCache:function(e,t){return Yt._code_cache[e]=t,Yt._code_loading[e]=!1,t},checkConstraints:function(e,t,r,a,s){return new Promise((function(o,n){var i,c=e.split(","),l=[],u=Object(O["a"])(c);try{var d=function(){var e=i.value;if(t[e]){var o=Ft.evaluate(r,t[e].expression);if(e.startsWith("gofr-search")){var n=o.shift(),c=["_elements=id"];while(o.length)c.push(o.shift()+"="+encodeURI(o.shift()));l.push(new Promise((function(r,o){Lt.get("/ocrux/fhir/"+n+"?"+c.join("&")).then((function(o){var n=o.data;if(0===n.total)r(!0);else if(s){var i=Ft.evaluate(n.entry,"resource.id");i.includes(s)?r(!0):(a.push(t[e].human),r(!1))}else a.push(t[e].human),r(!1)})).catch((function(e){o(e)}))})))}else o.every(Boolean)?l.push(!0):(a.push(t[e].human),l.push(!1))}};for(u.s();!(i=u.n()).done;)d()}catch(h){u.e(h)}finally{u.f()}Promise.all(l).then((function(e){e.every(Boolean)?o(!0):o(!1)})).catch((function(e){n(e)}))}))},lookup:function(e,t){return e?t?Yt.codeLookup(t,e):e.system&&e.code?Yt.codeLookup(e.system,e.code):e.reference?Yt.resourceLookup(e.reference):/([A-Z]\w*)\/([A-Za-z0-9\-.]{1,64})/.test(e)?Yt.resourceLookup(e):new Promise((function(t){return t(e)})):new Promise((function(t){return t(e)}))},resourceLookup:function(e){return new Promise((function(t){var r=e;Yt._code_loading[r]?setTimeout((function(){t(Yt.resourceLookup(e))}),200):Yt._code_cache[r]?t(Yt._code_cache[r]):(Yt._code_loading[r]=!0,Lt.get("/ocrux/fhir/$short-name?reference="+e).then((function(a){var s=a.data;s.display?t(Yt._setCache(r,s.display)):(console.log("No display data from reference found ",r,s),t(Yt._setCache(r,e)))})).catch((function(a){console.log(a),t(Yt._setCache(r,e))})))}))},codeLookup:function(e,t,r){return new Promise((function(a){var s=e+"#"+t;Yt._code_loading[s]?setTimeout((function(){a(Yt.codeLookup(e,t,r))}),200):Yt._code_cache[s]?a(Yt._code_cache[s]):(Yt._code_loading[s]=!0,Lt.get("/ocrux/fhir/$short-name?system="+e+"&code="+t+"&valuset="+r).then((function(e){var r=e.data;r.display?a(Yt._setCache(s,r.display)):(console.log("No display data from codesystem found ",s,r),a(Yt._setCache(s,t)))})).catch((function(e){console.log(e),a(Yt._setCache(s,t))})))}))},pathFieldExpression:function(e){var t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t},expand:function(e){var t=function(e,t){return e.display===t.display?e.code===t.code?0:e.code<t.code?-1:1:e.display<t.display?-1:1},r=function(e,t){if(e.compose.include){var r,a=Object(O["a"])(e.compose.include);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.concept){var o,n=Object(O["a"])(s.concept);try{for(n.s();!(o=n.n()).done;){var i=o.value;i.system=s.system,t.push(i)}}catch(c){n.e(c)}finally{n.f()}}}}catch(c){a.e(c)}finally{a.f()}}};return new Promise((function(a,s){var o=e.lastIndexOf("/"),n=e.lastIndexOf("|"),i=e.slice(o+1,-1!==n?n:e.length),c=[];Lt.get("/ocrux/fhir/ValueSet/"+i+"/$expand").then((function(e){var o=e.data;try{o.expansion&&0!==o.expansion.total||!o.compose.include?c=o.expansion.contains:r(o,c),c.sort(t),a(c)}catch(n){console.log(n),s(new Error("Invalid response from server."))}})).catch((function(){Lt.get("/ocrux/fhir/ValueSet/"+i).then((function(e){var s=e.data;r(s,c),c.sort(t),a(c)})).catch((function(e){s(e)}))}))}))}},Ht=Yt,zt=r("1dce"),Gt=r.n(zt),Jt=r("a7fe"),Zt=r.n(Jt),Kt=r("0551"),Xt=r.n(Kt),Wt=r("a925"),Qt=r("f693"),er=r("edd4"),tr=r("d61f");Object.defineProperty(a["a"].prototype,"$fhirpath",{value:Xt.a}),Object.defineProperty(a["a"].prototype,"$fhirutils",{value:Ht}),a["a"].config.productionTip=!1,a["a"].use(Zt.a,l.a),a["a"].use(Gt.a),a["a"].use(r("2ead")),a["a"].use(Wt["a"]),a["a"].use(tr["a"]);var rr=new Wt["a"]({locale:"en",messages:{fr:Qt,en:er}});new a["a"]({router:Ut,store:qt,vuetify:Bt,i18n:rr,render:function(e){return e(P)}}).$mount("#app")},7709:function(e,t,r){"use strict";(function(e){var a=r("b85c"),s=(r("ac1f"),r("1276"),r("9911"),r("a15b"),r("b0c0"),r("7db0"),r("d3b7"),r("25f0"),r("e9c4"),r("9b31"));t["a"]={mixins:[s["a"]],name:"Client",data:function(){return{tab:"record",advancedView:!1,outcomes:{0:"Success",4:"Minor Failure - Client Error",8:"Serious Failure - Server Error",12:"Major Failure - Server Crashed"},selected:"",matchEvents:[],matchRule:[],auditEvent:[],systems:{},primary_systems:[Object({NODE_ENV:"production",VUE_APP_CRUID_TAG:"5c827da5-4858-4f3d-a50c-62ece001efea",VUE_APP_BROKEN_MATCH_URL:"http://clientregistry.org/brokenMatch",VUE_APP_FHIR_ROOT:"http://localhost:8081/clientregistry",VUE_APP_BACKEND_SERVER:"https://localhost:3000/OCRUX",BASE_URL:"/crux/"}).VUE_APP_SYSTEM_OPENMRS],match_count:0,uid:"",breaks:[],unbreaks:[],matchRuleHeaders:[{text:this.$t("field"),value:"name"},{text:this.$t("field_details"),value:"details"}],match_headers:[{text:this.$t("submitting_system"),value:"system"},{text:this.$t("record_id"),value:"id"},{text:this.$t("surname"),value:"family"},{text:this.$t("given_names"),value:"given"},{text:this.$t("gender"),value:"gender"},{text:this.$t("birth_date"),value:"birthdate"}],match_items:[],break_items:[]}},computed:{canGoBack:function(){return history.length>1}},mounted:function(){this.getPatient(),this.getAuditEvents()},methods:{getPatient:function(){var e=this;this.breaks=[],this.match_items=[],this.break_items=[],this.match_count=0,this.$http.get("/ocrux/fhir/Patient?_elements=link,extension&_id="+this.$route.params.clientId).then((function(t){var r=t.data.entry[0].resource.link[0].other.reference.split("/").pop(),s=t.data.entry[0].resource,o=[];if(s.extension){var n,i=Object(a["a"])(s.extension);try{for(i.s();!(n=i.n()).done;){var c=n.value;"http://clientregistry.org/brokenMatch"===c.url&&o.push(c.valueReference.reference.split("/").pop())}}catch(l){i.e(l)}finally{i.f()}}o.length>0&&(o=o.join(","),e.$http.get("/ocrux/fhir/Patient?_id="+o).then((function(t){var r,s=Object(a["a"])(t.data.entry);try{for(s.s();!(r=s.n()).done;){var o=r.value,n=o.resource,i=void 0,c=void 0,u=void 0,d=void 0,h=void 0;if(n.meta&&n.meta.tag){var v,p=Object(a["a"])(n.meta.tag);try{for(p.s();!(v=p.n()).done;){var m=v.value;"http://openclientregistry.org/fhir/clientid"===m.system&&(h=m.code,c=m.display)}}catch(l){p.e(l)}finally{p.f()}}var f=[];if(n.identifier){var _,g=Object(a["a"])(n.identifier);try{for(g.s();!(_=g.n()).done;){var b=_.value,y=e.getSystemURIDisplayName(b.system);y?("internalid"===y.id&&(i=b.value),f.push({name:y.name,value:b.value})):f.push({name:b.system,value:b.value})}}catch(l){g.e(l)}finally{g.f()}}try{u=n.name.find((function(e){return"official"===e.use})),u?u.given||(u.given=[]):u={family:"",given:[]}}catch(l){u={family:"",given:[]}}try{d=n.telecom.find((function(e){return e.system="phone"})).value}catch(l){d=""}e.$route.query.pos&&e.$route.query.pos===h?e.break_items.unshift({fid:n.id,system:c,id:i,gender:n.gender,birthdate:n.birthDate,name:n.name,telecom:n.telecom,identifier:f,family:u.family,given:u.given.join(" "),phone:d}):e.break_items.push({fid:n.id,system:c,id:i,gender:n.gender,birthdate:n.birthDate,name:n.name,telecom:n.telecom,identifier:f,family:u.family,given:u.given.join(" "),phone:d})}}catch(l){s.e(l)}finally{s.f()}}))),e.$http.get("/ocrux/fhir/Patient?_include=Patient:link&_id="+r).then((function(t){var r,s=Object(a["a"])(t.data.entry);try{for(s.s();!(r=s.n()).done;){var o=r.value,n=o.resource;if(n.meta.tag&&void 0!==n.meta.tag.find((function(e){return"5c827da5-4858-4f3d-a50c-62ece001efea"===e.code})))e.uid=n.id;else{n.id===e.$route.params.clientId&&(e.selected=e.match_count);var i=void 0,c=void 0,u=void 0,d=void 0,h=void 0;if(n.meta&&n.meta.tag){var v,p=Object(a["a"])(n.meta.tag);try{for(p.s();!(v=p.n()).done;){var m=v.value;"http://openclientregistry.org/fhir/clientid"===m.system&&(h=m.code,c=m.display)}}catch(l){p.e(l)}finally{p.f()}}var f=[];if(n.identifier){var _,g=Object(a["a"])(n.identifier);try{for(g.s();!(_=g.n()).done;){var b=_.value,y=e.getSystemURIDisplayName(b.system);y&&y.name?("internalid"===y.id&&(i=b.value),f.push({name:y.name,value:b.value})):f.push({name:b.system,value:b.value})}}catch(l){g.e(l)}finally{g.f()}}var w=[];if(n.extension){var $,x=Object(a["a"])(n.extension);try{for(x.s();!($=x.n()).done;){var k=$.value;w.push({name:k.url,value:k.valueString?k.valueString:k.valueDate})}}catch(l){x.e(l)}finally{x.f()}}try{u=n.name.find((function(e){return"official"===e.use})),u?u.given||(u.given=[]):u={family:"",given:[]}}catch(l){u={family:"",given:[]}}try{d=n.telecom.find((function(e){return e.system="phone"})).value}catch(l){d=""}e.$route.query.pos&&e.$route.query.pos===h?e.match_items.unshift({fid:n.id,selectIdx:e.match_count,system:c,id:i,gender:n.gender,birthdate:n.birthDate,name:n.name,telecom:n.telecom,identifier:f,extension:w,family:u.family,given:u.given.join(" "),phone:d}):e.match_items.push({fid:n.id,selectIdx:e.match_count,system:c,id:i,gender:n.gender,birthdate:n.birthDate,name:n.name,telecom:n.telecom,identifier:f,extension:w,family:u.family,given:u.given.join(" "),phone:d}),e.match_count++}}}catch(l){s.e(l)}finally{s.f()}}))}))},selectPatient:function(e){this.selected=e.selectIdx},breakMatch:function(){var e=this;if(this.breaks.length>0){this.$store.state.progress.enable=!0,this.$store.state.progress.title="Breaing Match";var t,r=this.$store.state.auth.username,s="/ocrux/match/break-match?username=".concat(r),o=[],n=Object(a["a"])(this.breaks);try{for(n.s();!(t=n.n()).done;){var i=t.value;o.push("Patient/"+i.fid)}}catch(c){n.e(c)}finally{n.f()}this.$http.post(s,o).then((function(){e.$store.state.progress.enable=!1,e.countMatchIssues(),e.getPatient(),e.getAuditEvents()}))}},revertBreak:function(){var e=this;if(this.unbreaks.length>0){this.$store.state.progress.enable=!0,this.$store.state.progress.title="UnBreaing Match";var t,r=this.$store.state.auth.username,s="/ocrux/match/unbreak-match?username=".concat(r),o=[],n=Object(a["a"])(this.unbreaks);try{for(n.s();!(t=n.n()).done;){var i,c=t.value,l=Object(a["a"])(this.match_items);try{for(l.s();!(i=l.n()).done;){var u=i.value;o.push({id2:"Patient/"+u.fid,id1:"Patient/"+c.fid})}}catch(d){l.e(d)}finally{l.f()}}}catch(d){n.e(d)}finally{n.f()}this.$http.post(s,o).then((function(){e.$store.state.progress.enable=!1,e.countMatchIssues(),e.getPatient(),e.getAuditEvents()}))}},getAuditEvents:function(){var t=this;this.matchEvents=[];var r="/ocrux/fhir/AuditEvent?entity=".concat(this.$route.params.clientId,"&entity-name=submittedResource,breakTo,breakFrom,unBreak,unBreakFromResource&_sort=-_lastUpdated");this.$http.get(r).then((function(r){t.auditEvent=r.data;var s,o=Object(a["a"])(r.data.entry);try{for(o.s();!(s=o.n()).done;){var n=s.value,i={matchData:[]};i.recorded=n.resource.recorded;var c=n.resource.entity.find((function(e){return"break"===e.name||"breakFrom"===e.name})),l=n.resource.entity.find((function(e){return"unBreak"===e.name||"unBreakFromResource"===e.name})),u=void 0;if(n.resource.subtype&&Array.isArray(n.resource.subtype)){var d,h=Object(a["a"])(n.resource.subtype);try{for(h.s();!(d=h.n()).done;){var v=d.value;"http://hl7.org/fhir/restful-interaction"===v.system&&(u=v.code)}}catch(P){h.e(P)}finally{h.f()}}if(i.operation=u,i.outcomeCode=n.resource.outcome,i.outcome=t.outcomes[n.resource.outcome],i.outcomeDesc=n.resource.outcomeDesc,n.resource.agent&&Array.isArray(n.resource.agent)){var p,m=Object(a["a"])(n.resource.agent);try{for(m.s();!(p=m.n()).done;){var f=p.value;f.altId&&(i.username=f.altId),f.network&&(i.ipaddress=f.network.address)}}catch(P){m.e(P)}finally{m.f()}}if(c){i.breakFrom=[],i.type="breakMatch";var _,g=Object(a["a"])(n.resource.entity);try{for(g.s();!(_=g.n()).done;){var b=_.value;"break"===b.name&&(i.break=b.what.reference),"oldCRUID"===b.name&&(i.CRUID=b.what.reference),"breakFrom"===b.name&&i.breakFrom.push(b.what.reference)}}catch(P){g.e(P)}finally{g.f()}t.matchEvents.push(i)}else if(l){i.unBreakFrom=[],i.type="unBreak";var y,w=Object(a["a"])(n.resource.entity);try{for(w.s();!(y=w.n()).done;){var $=y.value;"unBreak"===$.name&&(i.unBreak=$.what.reference),"unBreakFromCRUID"===$.name&&(i.unBreakFromCRUID=$.what.reference),"unBreakFromResource"===$.name&&i.unBreakFrom.push($.what.reference)}}catch(P){w.e(P)}finally{w.f()}t.matchEvents.push(i)}else{var x,k=Object(a["a"])(n.resource.entity);try{for(k.s();!(x=k.n()).done;){var C=x.value;if("submittedResource"===C.name){i.type="submittedResource",i.submittedResource=C.what.reference;var V,I=Object(a["a"])(C.detail);try{for(I.s();!(V=I.n()).done;){var D=V.value;if("resource"===D.type)i.submittedResourceData=D.valueString;else if("match"===D.type&&D.valueBase64Binary){var R=new e.from(D.valueBase64Binary,"base64").toString("ascii");R=JSON.parse(R);var S=[];for(var A in R.rule.fields){var N=R.rule.fields[A];S.push({name:A,id:A,details:N})}i.matchData.push({decisionRule:S,matchingType:R.rule.matchingType,filters:R.rule.filters,autoMatches:JSON.stringify(R.autoMatches,0,2),potentialMatches:JSON.stringify(R.potentialMatches,0,2),conflictsMatchResults:JSON.stringify(R.conflictMatches,0,2),query:JSON.stringify(R.query,0,2)})}}}catch(P){I.e(P)}finally{I.f()}}}}catch(P){k.e(P)}finally{k.f()}t.matchEvents.push(i)}}}catch(P){o.e(P)}finally{o.f()}}))},close:function(){window.close()}}}}).call(this,r("b639").Buffer)},"9b31":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("7db0"),r("d3b7");var a=r("bc3a"),s=r.n(a),o={methods:{countMatchIssues:function(){var e=this;s.a.get("/ocrux/match/count-match-issues").then((function(t){t.data&&(e.$store.state.totalMatchIssues=t.data.total)}))},countNewAutoMatches:function(){var e=this;s.a.get("/ocrux/match/count-new-auto-matches").then((function(t){t.data&&(e.$store.state.totalAutoMatches=t.data.total)}))},getClientDisplayName:function(e){var t=this.$store.state.clients.find((function(t){return t.id===e}));if(t)return t.displayName},getClients:function(){var e=this;s.a.get("/ocrux/config/getClients").then((function(t){e.$store.state.clients=t.data})).catch((function(e){throw e}))},getSystemURIDisplayName:function(e){if("http://openclientregistry.org/fhir/sourceid"===e)return{name:"Internal ID",id:"internalid"};var t,r;for(var a in this.$store.state.systemURI){var s=void 0;if(Array.isArray(this.$store.state.systemURI[a].uri)?s=this.$store.state.systemURI[a].uri.find((function(t){return t===e})):this.$store.state.systemURI[a].uri===e&&(s=e),s){t=this.$store.state.systemURI[a].displayName,r=a;break}}return{name:t,id:r}}}}},edd4:function(e){e.exports=JSON.parse('{"extension_patient_status_date":"Status Date","extension_patient_status":"Status","extension_patient_date_enrollement":"Enrollment Date","extension_patient_date_Initiation_ARV":"ART Initiation Date","identifier_http://openelis-global.org/pat_nationalId":"ART Number","identifier_https://openmrs.org/UPI":"UPID","identifier_http://clientregistry.org/openmrs":"Internal ID","http://clientregistry.org/artnumber":"ART Number","http://clientregistry.org/nationalid":"National ID","patient_status":"Status","patient_status_date":"Status Date","http://openelis-global.org/pat_nationalId":"ART Number","patient_date_enrollement":"Enrollment Date","patient_date_Initiation_ARV":"ART Initiation Date","menu_home":"Home","menu_action_required":"Actions Required","menu_auto_matches":"Auto-Matches","menu_csv":"CSV Reports","menu_accounts":"Accounts","menu_logout":"Logout","account_add":"Add User","user":"User","account_list":"User List","account_change_password":"Change Password","login":"Login","auth_failed":"Authentication failed","labels_Password":"Password","current_password":"Current password","new_passord":"New password","retype_password":"Confirm password","labels_Username":"Username","clear":"Clear","back":"Back","close":"Close","user.add":"Add","password_change":"Change","cr_id":"CR ID","surname":"Surname","given_names":"Given names","gender":"Gender","birth_date":"Date of Birth","middle_names":"Middle names","source":"Source","source_id":"Source ID","reason":"Reason","date_flagged":"Date flagged","username":"Username","submitting_system":"Submitting system","record":"Record","history":"History","review_potential_matches":"Review potential matches","matched_records":"Matched records","break_matches":"Break matches","break_matche":"Break match","broken_matches":"Broken matches","revert_break":" Revert break","submitted_resource":"Submitted resource","event":"Event","operation_time":"Operation time","confirm_remove_flag":"No changes have been made, are you sure you want to go ahead and remove the flag?","confirm_move_all_to_new":"Do you want to include all the other records from this CR ID and move them all to the new CR ID","other_name":"Other name","user_role":"User role","field":"Field","field_details":"Field details","record_id":"Record ID","csv_name":"CSV name","reports":"Reports","login_failed":"Login failed","username_required":"Username is required","password_required":"Password is required","new_password_required":"New password is required","retype_new_password":"Retype new password","show_scores_matrix":"Show scores matrix","save_changes":"Save changes","changing_password":"Changing password","review_changes":"Review changes","cancel":"Cancel","save":"Save","move_all":"Move all?","move_one":"Move this record","move_all_records":"Move all records","scores_matrix":"Scores matrix","assign_new_cr_id":"Assign to a new CR ID","new_cr_id":"New CR ID","original_cr_id":"Original CR ID","full_view":"Full view","phone":"Phone","loading_potential":"Loading potential matches","loading_auto":"Loading auto matches","something_wrong":"Oops, something went wrong","Temporary_cr_id":"Temporary CR ID","saving":"Saving...","operation_successful":"Operation successful","operation_failed":"An error occurred, operation failed","new_password_mismatch":"New password does not match.","password_changed":"Password changed","error_occured":"An error occurred","users_list":"Users list","search":"Search","row_per_page":"Rows per page : ","no_data":"No data available","simplified_naming":"Use simplified naming?","include_real_crid":"Include Actual CR ID with Temporary CR ID?"}')},f693:function(e){e.exports=JSON.parse('{"extension_patient_status_date":"Date du Statut","extension_patient_status":"Statut","extension_patient_date_enrollement":"Date d\'Enrollment","extension_patient_date_Initiation_ARV":"Date d\'Initiation ARV","identifier_http://openelis-global.org/pat_nationalId":"Numéro ARV","identifier_https://openmrs.org/UPI":"UPID","identifier_http://clientregistry.org/openmrs":"ID Interne ","http://clientregistry.org/artnumber":"Numéro ARV","http://clientregistry.org/nationalid":"ID National","patient_status":"Statut","patient_status_date":"Date Statut","http://openelis-global.org/pat_nationalId":"Numéro ARV","patient_date_enrollement":"Date d\'Enrollement","patient_date_Initiation_ARV":"ARV  Date d\'Initiation","menu_home":"Accueil","menu_action_required":"Actions Requises","menu_auto_matches":"Correspondances Auto.","menu_csv":"Rapports CSV","menu_accounts":"Comptes","menu_logout":"Déconnexion","account_add":"Ajouter un utilisateur","user":"Utilisateur","account_list":"Liste des utilisateurs","account_change_password":"Changer mot de passe","login":"Connexion","auth_failed":"L\'authentification a échoué","labels_Password":"Mot de passe","current_password":"Mot de passe actuel","new_passord":"Nouveau mot de passe","retype_password":"Confirmer le mot de passe","labels_Username":"Nom d\'utilisateur","clear":"Reinitialiser","back":"Retour","close":"Fermer","user.add":"Ajouter","password_change":"Changer","cr_id":"Identifiant de la CR","surname":"Nom de famille","given_names":"Prénoms","gender":"Genre","birth_date":"Date de Naissance","middle_names":"Deuxième prénom","source":"Source","source_id":"Identifiant de la source","reason":"Raison","date_flagged":"Date de signalement","username":"Nom d\'utilisateur","submitting_system":"système de provenance","record":"Enregistrement","history":"Historique","review_potential_matches":"Examiner les correspondances potentielles","matched_records":"Enregistrements correspondants","break_matches":"Correspondances rompu ","break_matche":"Rompre la Correspondance ","broken_matches":"Correspondances retirées","revert_break":" Rétablir la rupture","submitted_resource":"Ressource transmise.","event":"Événement","operation_time":"durée d\'opération","other_name":"Autre nom","user_role":"Rôle","field":"Champ","field_details":"Détails du champ.","record_id":"ID Enregistrement","csv_name":"Nom CSV","reports":"Rapports","login_failed":"Échec de la connexion","username_required":"Le nom d\'utilisateur est requis","password_required":"Le mot de passe est requis","new_password_required":"Le nouveau mot de passe est requis","retype_new_password":"Confirmer le nouveau mot de passe","show_scores_matrix":"Afficher la matrice des scores","save_changes":"Sauvegarder les changements","changing_password":"Changement de mot de passe.","review_changes":"Examinez les modifications","confirm_remove_flag":"Aucune modification n\'a été apportée. Êtes-vous sûr de vouloir continuer et supprimer le flag ?","cancel":"Annuler","save":"Sauvegarder","move_all":"Tout déplacer ?","confirm_move_all_to_new":"Voulez-vous inclure tous les autres enregistrements de ce CR ID et les déplacer tous vers le nouveau CR ID ","move_one":"Déplacer cet enregistrement","move_all_records":"Déplacer tous les enregistrements","scores_matrix":"Matrice de scores","assign_new_cr_id":"Attribuer à un nouveau CR ID","new_cr_id":"Nouveau CR ID","original_cr_id":"CR ID original","full_view":"Vue complète","phone":"Téléphone","loading_potential":"Chargement de correspondances potentielles","loading_auto":"Chargement des correspondances automatiques","something_wrong":"Oups, quelque chose s\'est mal passé","Temporary_cr_id":"CR ID temporaire","saving":"Sauvegarde en cours ...","operation_successful":" Opération réussie","operation_failed":"Une erreur s\'est produite, l\'opération a échoué","new_password_mismatch":"Nouveau mot de passe non correspondant.","password_changed":"Le mot de passe a été modifié","error_occured":"Une erreur est survenue","users_list":"Liste des utilisateurs","search":"Rechercher","row_per_page":"Lignes par page :","no_data":"Aucune donnée disponible","simplified_naming":"Utiliser la dénomination simplifiée ?","include_real_crid":"Inclure l\'ID CR actuel dans l\'ID CR temporaire ?"}')}});
//# sourceMappingURL=app.31eb993f.js.map